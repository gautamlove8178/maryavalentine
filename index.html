<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Marya</title>
    <style>
        /* --- CSS VARIABLES & RESET --- */
        :root {
            --primary-color: #ff0055; /* Deeper Pink/Red */
            --neon-glow: #ff3377;
            --bg-color: #000;
            --font-main: 'Arial', sans-serif;
            --font-hand: 'Great Vibes', cursive; /* Updated Font */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { width: 100%; height: 100%; overflow: hidden; background: var(--bg-color); font-family: var(--font-main); }

        /* --- FONTS --- */
        /* Added Great Vibes for better handwriting style */
        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital,wght@1,500&display=swap');

        /* --- LAYERS --- */
        #black-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 1000;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 2s ease-out;
        }

        #bg-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;
            opacity: 0; transition: opacity 3s ease;
        }

        .slide {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            opacity: 0; transform: scale(1);
        }

        /* Cinematic Overlay (Light Leak) */
        #cinema-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2;
            background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.7) 100%);
            box-shadow: inset 0 0 100px rgba(50, 0, 10, 0.5);
            pointer-events: none;
        }

        /* Main Content Layer */
        #content-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            pointer-events: none;
        }

        /* Fireworks Canvas */
        #canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 5;
            pointer-events: none;
        }

        /* --- BUTTON --- */
        #start-btn {
            background: transparent;
            color: #fff;
            border: 2px solid #fff;
            padding: 15px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            border-radius: 50px;
            box-shadow: 0 0 15px #fff;
            transition: transform 0.3s, box-shadow 0.3s;
            pointer-events: auto;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-family: 'Playfair Display', serif;
        }
        #start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px var(--primary-color), inset 0 0 10px var(--primary-color);
            border-color: var(--primary-color);
        }

        /* --- NAME ANIMATION (NEON STYLE) --- */
        #name-container {
            width: 100%;
            max-width: 800px;
            display: none;
        }
        
        .name-text-svg {
            font-family: 'Great Vibes', cursive;
            font-size: 100px; /* Bigger font */
            fill: transparent; /* No fill inside */
            stroke: #ff99cc; /* Light Pink Stroke */
            stroke-width: 1.5;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            /* Neon Glow Effect */
            filter: drop-shadow(0 0 5px #ff0055) drop-shadow(0 0 15px #ff0055);
        }

        /* --- MESSAGES --- */
        #message-box {
            font-family: 'Playfair Display', serif;
            color: #fff;
            font-size: 1.8rem;
            text-align: center;
            min-height: 100px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            padding: 20px;
            display: none;
            line-height: 1.5;
        }
        .cursor {
            display: inline-block;
            width: 2px;
            height: 1.5rem;
            background-color: #fff;
            animation: blink 0.8s infinite;
        }

        /* --- FINAL CLIMAX (SVG HEART) --- */
        #final-screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 2s;
        }
        
        /* New Perfect Heart SVG Style */
        .final-heart-svg {
            width: 150px;
            height: 150px;
            fill: transparent;
            stroke: var(--primary-color);
            stroke-width: 3;
            filter: drop-shadow(0 0 10px var(--primary-color)) drop-shadow(0 0 30px var(--primary-color));
            animation: pulseHeart 1.5s infinite ease-in-out;
        }

        .final-text {
            margin-top: 30px;
            font-family: 'Great Vibes', cursive;
            font-size: 3rem;
            color: #fff;
            text-shadow: 0 0 20px var(--primary-color);
        }

        /* --- FLOATING HEARTS --- */
        .float-heart {
            position: absolute;
            bottom: -50px;
            color: var(--primary-color);
            font-size: 20px;
            animation: floatUp 4s linear forwards;
            opacity: 0.8;
            z-index: 4;
            text-shadow: 0 0 5px var(--glow-color);
        }

        /* --- ANIMATIONS --- */
        @keyframes blink { 50% { opacity: 0; } }
        @keyframes zoomPan {
            0% { opacity: 0; transform: scale(1); }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; transform: scale(1.1); }
        }
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }
        @keyframes pulseHeart {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; filter: drop-shadow(0 0 40px red); }
            100% { transform: scale(1); opacity: 0.8; }
        }

        /* Responsive Fixes */
        @media (max-width: 600px) {
            #message-box { font-size: 1.4rem; }
            .final-text { font-size: 2rem; }
            .name-text-svg { font-size: 70px; }
            #name-container { width: 95%; }
        }
    </style>
</head>
<body>

    <audio id="music" src="valentine.mp3" preload="auto"></audio>

    <div id="black-overlay">
        <button id="start-btn">Turn On The Light ðŸ’¡</button>
    </div>

    <div id="bg-container">
        <div class="slide" style="background-image: url('1.jpg');"></div>
        <div class="slide" style="background-image: url('2.jpg');"></div>
        <div class="slide" style="background-image: url('3.jpg');"></div>
        <div class="slide" style="background-image: url('4.jpg');"></div>
    </div>

    <div id="cinema-overlay"></div>

    <canvas id="canvas"></canvas>

    <div id="content-layer">
        
        <div id="name-container">
            <svg viewBox="0 0 600 200" width="100%">
                <text x="50%" y="65%" text-anchor="middle" 
                      class="name-text-svg">
                    Marya
                </text>
            </svg>
        </div>

        <div id="message-box"></div>

        <div id="final-screen">
            <svg class="final-heart-svg" viewBox="0 0 24 24">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
            <div class="final-text">This heart already belongs to you.</div>
        </div>
    </div>

    <script>
        // Configuration
        const messages = [
            "Maryaâ€¦ tum ho to har lamha thoda zyada khoobsurat lagta hai â¤ï¸",
            "Tumhari ek muskurahat mere poore din ko roshan kar deti hai âœ¨", 
            "Tum sirf meri pasand nahi hoâ€¦ tum meri aadat ban chuki ho ðŸ’–", 
            "Is dil ko sukoon sirf tumhare paas aake milta hai ðŸ’«", 
            "Yeh Valentine sirf ek din nahiâ€¦ ek wada hai â¤ï¸", 
            "Jo sirf tumse shuru hota haiâ€¦ aur tum par hi khatam ðŸ’",
            "Marya...",
            "Jab se tum mili ho...",
            "Mera har lamha khaas ho gaya hai...",
            "Tumhari hassi meri duniya roshan karti hai...",
            "Tum sirf meri bestie ji nahi, meri Zindagi ho...",
        ];

        // DOM Elements
        const startBtn = document.getElementById('start-btn');
        const blackOverlay = document.getElementById('black-overlay');
        const bgContainer = document.getElementById('bg-container');
        const slides = document.querySelectorAll('.slide');
        const audio = document.getElementById('music');
        const nameContainer = document.getElementById('name-container');
        const nameTextSvg = document.querySelector('.name-text-svg');
        const messageBox = document.getElementById('message-box');
        const finalScreen = document.getElementById('final-screen');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // State
        let currentSlide = 0;

        // --- 1. START EXPERIENCE ---
        startBtn.addEventListener('click', () => {
            // Play Music
            audio.volume = 0.5;
            audio.play().catch(e => console.log("Audio play failed interaction required"));
            
            // Fade out black overlay
            blackOverlay.style.opacity = '0';
            setTimeout(() => {
                blackOverlay.style.display = 'none';
            }, 2000);

            // Start Background Slideshow
            bgContainer.style.opacity = '1';
            startSlideshow();

            // Start Name Animation
            setTimeout(animateName, 1500);
        });

        // --- 2. SLIDESHOW LOGIC ---
        function startSlideshow() {
            slides[0].style.animation = "zoomPan 6s linear infinite"; // Start first
            
            setInterval(() => {
                slides.forEach(s => s.style.opacity = 0); // Reset all
                slides[currentSlide].style.opacity = 0; 
                
                currentSlide = (currentSlide + 1) % slides.length;
                
                slides.forEach(s => s.style.animation = 'none');
                setTimeout(() => {
                    slides[currentSlide].style.animation = "zoomPan 6s linear forwards";
                }, 50);
            }, 5000);
        }

        // --- 3. NAME ANIMATION (Adjusted for Neon) ---
        function animateName() {
            nameContainer.style.display = 'block';
            
            // Calculate stroke length for dasharray
            const length = nameTextSvg.getComputedTextLength();
            nameTextSvg.style.strokeDasharray = length;
            nameTextSvg.style.strokeDashoffset = length;
            
            // Trigger animation
            nameTextSvg.getBoundingClientRect(); // reflow
            nameTextSvg.style.transition = 'stroke-dashoffset 3.5s ease-in-out';
            nameTextSvg.style.strokeDashoffset = '0';
            // Note: Removed the fill transition to keep it transparent/neon

            // After animation, hide name and start messages
            setTimeout(() => {
                nameContainer.style.opacity = '0';
                nameContainer.style.transition = 'opacity 1s';
                setTimeout(() => {
                    nameContainer.style.display = 'none';
                    startMessages();
                }, 1000);
            }, 5000);
        }

        // --- 4. MESSAGE SEQUENCE ---
        function startMessages() {
            messageBox.style.display = 'block';
            processMessage(0);
        }

        function processMessage(index) {
            if (index >= messages.length) {
                // End of messages, trigger climax
                messageBox.style.display = 'none';
                triggerClimax();
                return;
            }

            const text = messages[index];
            messageBox.innerHTML = '<span id="text-content"></span><span class="cursor"></span>';
            const textSpan = document.getElementById('text-content');
            let charIndex = 0;

            // Typing Loop
            const typingInterval = setInterval(() => {
                textSpan.textContent += text[charIndex];
                charIndex++;
                createFloatingHeart(); 
                
                if (charIndex >= text.length) {
                    clearInterval(typingInterval);
                    setTimeout(() => {
                        messageBox.style.opacity = '0';
                        messageBox.style.transition = 'opacity 1s';
                        setTimeout(() => {
                            processMessage(index + 1);
                            messageBox.style.opacity = '1';
                        }, 1000);
                    }, 2500); 
                }
            }, 100); 
        }

        function createFloatingHeart() {
            const heart = document.createElement('div');
            heart.classList.add('float-heart');
            heart.innerHTML = 'â¤';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
            document.body.appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, 5000);
        }

        // --- 5. FINAL CLIMAX & FIREWORKS ---
        function triggerClimax() {
            finalScreen.style.display = 'flex';
            setTimeout(() => {
                finalScreen.style.opacity = '1';
                startFireworks();
            }, 100);
        }

        // --- CANVAS FIREWORKS LOGIC ---
        function startFireworks() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const particles = [];
            
            class Particle {
                constructor(x, y, color) {
                    this.x = x;
                    this.y = y;
                    this.color = color;
                    this.velocity = {
                        x: (Math.random() - 0.5) * 8,
                        y: (Math.random() - 0.5) * 8
                    };
                    this.alpha = 1;
                    this.friction = 0.96;
                }

                draw() {
                    ctx.globalAlpha = this.alpha;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 3, 0, Math.PI * 2, false);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                }

                update() {
                    this.velocity.x *= this.friction;
                    this.velocity.y *= this.friction;
                    this.x += this.velocity.x;
                    this.y += this.velocity.y;
                    this.alpha -= 0.01;
                }
            }

            function animate() {
                requestAnimationFrame(animate);
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; 
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                particles.forEach((particle, i) => {
                    if (particle.alpha > 0) {
                        particle.update();
                        particle.draw();
                    } else {
                        particles.splice(i, 1);
                    }
                });
            }

            setInterval(() => {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height / 2;
                const colors = ['#ff0055', '#ff3377', '#fff', '#ffd700'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                
                for (let i = 0; i < 30; i++) {
                    particles.push(new Particle(x, y, color));
                }
            }, 800); 

            animate();
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>